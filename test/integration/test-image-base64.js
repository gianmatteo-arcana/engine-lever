#!/usr/bin/env node

/**
 * Generate proper base64 test images for integration tests
 */

// Create a small red square PNG (10x10)
const redSquarePNG = Buffer.from([
  // PNG signature
  0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,
  // IHDR chunk
  0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
  0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A,
  0x08, 0x02, 0x00, 0x00, 0x00, 0x02, 0x50, 0x58, 0xEA,
  // IDAT chunk (compressed red pixels)
  0x00, 0x00, 0x00, 0x1E, 0x49, 0x44, 0x41, 0x54,
  0x78, 0x9C, 0x62, 0xFC, 0xCF, 0xC0, 0xC0, 0xC0,
  0xC4, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
  0xC0, 0xC0, 0xC0, 0xC4, 0x00, 0x00, 0x00, 0xFF,
  0x00, 0xFF, 0x3B, 0xB1, 0x04, 0x12,
  // IEND chunk
  0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
]);

// Create a small blue square PNG (10x10)
const blueSquarePNG = Buffer.from([
  // PNG signature
  0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,
  // IHDR chunk
  0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
  0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x0A,
  0x08, 0x02, 0x00, 0x00, 0x00, 0x02, 0x50, 0x58, 0xEA,
  // IDAT chunk (compressed blue pixels)
  0x00, 0x00, 0x00, 0x1E, 0x49, 0x44, 0x41, 0x54,
  0x78, 0x9C, 0x62, 0xC0, 0xC0, 0xC4, 0xC0, 0xC0,
  0xF8, 0xFF, 0x9F, 0x01, 0x03, 0x03, 0x03, 0x03,
  0x03, 0x03, 0x43, 0x00, 0x00, 0x00, 0xFF, 0x00,
  0xFF, 0x67, 0xD5, 0x1C, 0xB1,
  // IEND chunk
  0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
]);

console.log('Red Square PNG (10x10):');
console.log(redSquarePNG.toString('base64'));
console.log('');

console.log('Blue Square PNG (10x10):');
console.log(blueSquarePNG.toString('base64'));
console.log('');

// Create an even simpler solid color PNG
function createSolidColorPNG(r, g, b) {
  const canvas = require('canvas');
  const { createCanvas } = canvas;
  const cv = createCanvas(10, 10);
  const ctx = cv.getContext('2d');
  ctx.fillStyle = `rgb(${r},${g},${b})`;
  ctx.fillRect(0, 0, 10, 10);
  return cv.toBuffer('image/png');
}

// If canvas is available, use it
try {
  const redPNG = createSolidColorPNG(255, 0, 0);
  const bluePNG = createSolidColorPNG(0, 0, 255);
  
  console.log('Canvas-generated Red PNG:');
  console.log(redPNG.toString('base64'));
  console.log('');
  
  console.log('Canvas-generated Blue PNG:');
  console.log(bluePNG.toString('base64'));
} catch (e) {
  console.log('Canvas not available, using hardcoded images');
}